import os

import git


def squash_and_push(path_repo, msg):
    os.chdir(path_repo)
    repo = git.Repo()
    origin = repo.remote(name='origin')
    origin.pull()

    repo.git.reset('--soft', 'HEAD^')
    repo.git.add('.')
    repo.git.commit('.', '-m', msg)

    origin.push('--force')